= form_tag products_path, id: 'product-search-form', method: :get do
  .product-categories.hidden-xs-down
    %h1 Product Categories
    - cache cache_key_for_products do
      = topics_nav(controller: :products)
    = hidden_field_tag 'topic_ids', @topic_id

  %h1.hidden-xs-down Looking for something?
  .query-container
    = text_field_tag :q, @query, id: 'query', class: "form-control"
    %span.icon
      = fa_icon 'search'
  = submit_tag "Search", id: 'search-button',
    class: "btn btn-green form-control"
  %p.filter-label.text-xs-right.hidden-sm-up
    %span#mobile-menu-open
      = fa_icon 'filter'
      Filters
  .hidden-xs-down
    %h1 Recently viewed
    = render 'recently_viewed'

  = hidden_field_tag 'sort', @sort_by

#mobile-slide-menu.hidden-sm-up
  = link_to '#', id: 'mobile-menu-close', class: 'close-btn' do
    = fa_icon 'times'
  .product-categories
    %h1 Product Categories
    - cache cache_key_for_products do
      = topics_nav(controller: :products)
